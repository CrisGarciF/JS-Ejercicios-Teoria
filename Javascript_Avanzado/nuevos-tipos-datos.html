<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuevos Tipos de Datos JavaScript</title>
</head>
<body>
    <h1>Nuevos tipos de datos en JavaScript</h1>
    <script>
        // Symbol()
        /*Crea elementos privados en un objeto y crea referencias unicas */
        /* let id = Symbol("id")
        let id2 = Symbol("id2")

        console.log(id === id2);
        console.log(id,id2);
        console.log(typeof id, typeof id2);

        const NOMBRE = Symbol("nombre");
        const SALUDAR = Symbol("saludar");

        const persona = {
            [NOMBRE]: "Cris",
        }
        console.log(persona);

        persona.NOMBRE = "Cristian"
        console.log(persona);
        console.log(persona.NOMBRE);
        console.log(persona[NOMBRE]);

        persona[SALUDAR] = function (){
            console.log(`Hola`);
        }
        console.log(persona);
        persona[SALUDAR]()

        for(let propiedade in persona){
            console.log(propiedade);
            console.log(persona[propiedade]);
        }

        console.log(Object.getOwnPropertySymbols(persona)); */



        // SETs
        /*es una dato de javascript que solo acepta valores unicos(complejos)*/
        /* const set = new Set([1,2,3,4,5,5,true,true,false,{},{},"HOLA","hola"])
        console.log(set);
        console.log(set.size);// size para mira el tamaÃ±o de un elemento set

        const set2 = new Set()
        set2.add(1)
        set2.add(1)
        set2.add(5)
        set2.add(5)
        set2.add(true)
        set2.add(2)
        set2.add({})
        console.log(set2);
        console.log(set2.size);

        console.log("Recoriendo set");
        for(item of set){
            console.log(item);
        }

        console.log("recorriendo set2");
        set2.forEach(item => console.log((item)))

        // Comvertir set a array (Areglo)
        let arr = Array.from(set)
        console.log(arr);
        console.log(arr[0]);
        console.log(arr[9]);


        // metodo delete para eliminar datos de un set
        set.delete("hola")
        console.log(set);

        // metodo para comprobar si un dato existe dentro set
        console.log(set.has(1));

        // metodo para limpiar el dato set
        set2.clear()
        console.log(set2); */



        //Maps
        /*el elemento map es una colecion de datos o diccionario*/
       /*  const mapa = new Map()
        // set para agregar informacion
        mapa.set("nombre","Cristian")
        mapa.set("edad",20)

        console.log(mapa);
        console.log(mapa.size);
        console.log(mapa.has("nombre"));
        // get para obtener los datos
        console.log(mapa.get("nombre"));
        mapa.set("nombre","Cristian Garcia")
        console.log(mapa.get("nombre"));
        mapa.delete("edad")

        mapa.set(19,"diecinueve")
        mapa.set(false,"falso")
        mapa.set({},{})

        console.log(mapa);

        for (let [key, value] of mapa) {
            console.log(`llave: ${key}, valor : ${value}`);
        }

        // Otra forma de declarar o crear elementos map
        const mapa2 = new Map([
            ["nombre","Cristian Dios"],
            ["edad",700],
            [null, "null"]
        ])

        console.log(mapa2);

        // obtener los valores y las llaves de la variable mapa2 y separalo en array 
        const llavesMapa2 = [...mapa2.keys()]
        const valoresMapa2 = [...mapa2.values()]
        console.log(llavesMapa2);
        console.log(valoresMapa2); */



        // WeakSets & WeakMaps
        /* const ws = new WeakSet()

        let valor1 = {"valor":1}
        let valor2 = {"valor":2}
        let valor3 = {"valor":3}

        ws.add(valor1)
        ws.add(valor2)
        console.log(ws);

        console.log(ws.has(valor1));
        console.log(ws.has(valor3));

        ws.delete(valor2)
        console.log(ws);

        ws.add(valor2)
        ws.add(valor3)
        console.log(ws);

        setInterval(()=> console.log(ws),1000)

        setTimeout(() => {
            valor1 = null
            valor2 = null
            valor3 = null
        }, 5000); */


        // WeakMap
        /* const mapa2 = new WeakMap([
            ["nombre","Cristian Dios"],
            ["edad",700],
            [null, "null"]
        ]) */

        /* const wm = new WeakMap()
        let llave1 = {}
        let llave2 = {}
        let llave3 = {}

        wm.set(llave1, 1)
        wm.set(llave2, 2)
        console.log(wm);

        console.log(wm.has(llave1));
        console.log(wm.has(llave3));

        console.log(wm.get(llave1));
        console.log(wm.get(llave2));
        console.log(wm.get(llave3));

        wm.delete(llave2)
        console.log(wm);

        wm.set(llave2, 2)
        wm.set(llave3, 3)
        console.log(wm);

        setInterval(()=> console.log(wm), 1000)

        setTimeout(() => {
            llave1 = null
            llave2 = null
            llave3 = null
        }, 5000); */



        //iterables & iterators
        /*es un metodo especial el cual nos permite acceder a todo tipo de dato que sea iterable*/
        //const iterable = [1,2,3,4,5,6,6]
        /* const iterable = "hola mundo"
        const iterable = new Set([1,2,3,3,4,5])
        const iterable = new Map ([["nombre","cris"],["edad",20]]) */
        // Accedemos al iterador del interable
        /* const iterador = iterable[Symbol.iterator]();
        
        console.log(iterable);
        console.log(iterador); */
        /* console.log(iterador.next());
        console.log(iterador.next());
        console.log(iterador.next());
        console.log(iterador.next());
        console.log(iterador.next()); */

        /*  let next = iterador.next()

        while (!next.done) {
            console.log(next.value);
            next = iterador.next()
        } */


        // GENERATORS
        /* function* iterable() {
            yield "hola"
            console.log("Hola consola");
            yield "Hola 2"
            console.log("Segumos con mas instrucciones de nuestro codigo");
            yield "Hola 3"
            yield "Hola 4"
        }

        let iterador = iterable() */
        /* console.log(iterador.next());
        console.log(iterador.next());
        console.log(iterador.next());
        console.log(iterador.next());
        console.log(iterador.next()); */

        /* for(let y of iterador){
            console.log(y);
        }

        const arr = [...iterable()]
        console.log(arr);

        function cuadrado(valor){
            setTimeout(() => {
                return console.log({valor, resultado: valor*valor});
            }, Math.random()*1000);
        }

        function* generador() {
            console.log("Inicia Generador");
            yield cuadrado(0)
            yield cuadrado(1)
            yield cuadrado(2)
            yield cuadrado(3)
            yield cuadrado(4)
            yield cuadrado(5)
            console.log("Termina Generador");
        }
        let gen = generador()
        for(let g of gen){
            console.log(g);
        } */


        //  PROXIES
        /* const persona= {
            nombre:"",
            apellido:"",
            edad:0
        }

        const manejador = {
            set(obj, prop, valor){
                if(Object.keys(obj).indexOf(prop)=== -1){
                    return console.error(`La propiedad "${prop}" no existe en el objeto persona`);
                }
                obj[prop] = valor
            }
        }
        const cris = new Proxy(persona, manejador)
        cris.nombre = "Cristian"
        cris. apellido = "Garcia"
        cris.edad = 20
        cris.twitter = "@Cristian"
        console.log(cris);

        console.log(persona); */


        //Propiedades dinamicas de los objetos
        /* let aleatorio = Math.round(Math.random()*100 +5)
        const objUsusarios = {
            [`id_${aleatorio}`]:"Valor aleatorio"
        }
        console.log(objUsusarios);

        const usuarios = ["Cristian","Pedro","Tomas"]
        
        usuarios.forEach((usuario, index) => objUsusarios[`id_${index}`] = usuario)
        console.log(objUsusarios); */



        //THIS => 
        /* console.log(this);
        console.log(window);
        console.log(this === window);

        this.nombre = "Contexto global"
        console.log(this.nombre);

        function imprimir() {
            console.log(this.nombre);
        }
        imprimir()

        const obj = {
            nombre: "Contexto objeto",
            imprimir : function(){
                console.log(this.nombre);
            }
        }
        obj.imprimir()

        const obj2 = {
            nombre: "Contexto Objeto 2",
            imprimir
        }
        obj2.imprimir()

        const obj3 = {
            nombre: "Contexto objeto 3",
            imprimir :()=>{
                console.log(this.nombre)
            }
        }
        obj3.imprimir()

        function Persona(nombre) {
            const that = this
            that.nombre = nombre */
            //this.nombre = nombre
            //return console.log(this.nombre);
            /* return function(){
                console.log(this.nombre);
            } */
            //return ()=> console.log(this.nombre);
            /* return function(){
                console.log(that.nombre);
            }
        }

        let Cris = new Persona("Cristian")
        Cris() */


        // CALL, APPLY, BIND
        /* console.log(this);
        this.lugar = "Contexto global"

        function saludar(saludo,aQuien) {
            console.log(`${saludo} ${aQuien} desde ${this.lugar}`);
        }
        saludar("Hola","pepe")

        const obj = {
            lugar:"Contexto Objecto"
        } */
// call y apply llaman al contexto this o scope 
        /* saludar.call(obj, "Hola", "Cris")
        saludar.call(null, "Hola", "Cris")
        saludar.call(this, "Hola", "Cris")

        saludar.apply(obj,["Adios","Garcia"])
        saludar.apply(null,["Adios","Garcia"])
        saludar.apply(this,["Adios","Garcia"])

        // bind nos permite enlasar contextos diferentes
        this.nombre = "window"

        const persona = {
            nombre:"Cristian",
            saludar: function(){
                console.log(`hola ${this.nombre}`);
            }
        }
        persona.saludar()

        const otraPersona = {
            saludar: persona.saludar.bind(persona),
        }
        otraPersona.saludar() */
    </script>
</body>
</html>